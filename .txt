import React from "react";
import { FaUserAstronaut, FaArrowLeft } from "react-icons/fa";
import { IoMdSend } from "react-icons/io";

const ChatContainer = ({ selectedRoom, setSelectedRoom }) => {
    const MessageDummyData = [
        {
            _id: "695eb25c86668712477b5f49",
            roomId: "695e2cdea16a08df0722406a",
            senderId: "695eb23b86668712477b5f47",
            text: "Hello from Postman!",
            createdAt: "2026-01-07T19:22:04.626Z",
        },
        {
            _id: "695eb26086668712477b5f4a",
            roomId: "695e2cdea16a08df0722406a",
            senderId: "676d1f3c2b1a90001e7c5678",
            text: "Hey! Who's there?",
            createdAt: "2026-01-07T19:23:10.123Z",
        },
        {
            _id: "695eb26186668712477b5f4b",
            roomId: "695e2cdea16a08df0722406b",
            senderId: "676d1f3c2b1a90001e7c5679",
            text: "Welcome to Late Night Coding room!",
            createdAt: "2026-01-07T20:01:55.555Z",
        },
        {
            _id: "695eb26286668712477b5f4c",
            roomId: "695e2cdea16a08df0722406b",
            senderId: "676d1f3c2b1a90001e7c5678",
            text: "Thanks! Ready to code ðŸš€",
            createdAt: "2026-01-07T20:02:40.789Z",
        },
        {
            _id: "695eb26386668712477b5f4d",
            roomId: "695e2cdea16a08df0722406a",
            senderId: "676d1f3c2b1a90001e7c5679",
            text: "This app is awesome!",
            createdAt: "2026-01-07T19:25:22.222Z",
        },
    ];

    return selectedRoom ? (
        <div className="bg-white/10 h-[calc(100vh-1rem)] relative p-5 rounded-xl text-white  backdrop-blur-xs">
            <div className="flex items-center py-3 mx-4 border-b border-stone-500">
                {/* LEFT â€” fixed 1/3 width */}
                <div className="flex items-center gap-2 basis-1/3 justify-start">
                    <img src="./ChatRoom1.png" alt="" className="w-10 rounded-full shrink-0" />
                    <h3 className="font-medium text-sm md:text-base truncate max-w-30 md:max-w-40">
                        {selectedRoom?.roomName}
                    </h3>
                </div>

                {/* MIDDLE â€” always center 1/3 */}
                <div className="basis-1/3 flex justify-center">
                    <span className="text-xs bg-gray-700 px-2 py-1 rounded-full whitespace-nowrap">
                        {selectedRoom?.category}
                    </span>
                </div>

                {/* RIGHT â€” fixed 1/3 width */}
                <div className="basis-1/3 flex justify-end">
                    <p className="text-xs md:text-sm text-gray-300 whitespace-nowrap">
                        {selectedRoom?.duration} hrs
                    </p>
                    <FaArrowLeft
                        className="size-4 ml-4 cursor-pointer hover:text-gray-300 transition-colors md:hidden"
                        onClick={() => setSelectedRoom(null)}
                    />
                </div>
            </div>

            {/* Chat Messages Area */}
            <div className="flex flex-col h-[calc(100%-120px)] overflow-y-scroll p-3 pb-6 scrollbar-hide">
                {MessageDummyData
                    .filter(msg => msg.roomId === selectedRoom._id) // match room
                    .map((msg) => (
                        <div
                            key={msg._id}
                            className={`flex items-end gap-2 mb-4 justify-end ${msg.senderId === "695eb23b86668712477b5f47" && "flex-row-reverse"
                                }`}
                        >
                            {/* Bubble */}
                            <div
                                className={`px-3 py-2 rounded-xl max-w-[70%] text-sm ${msg.senderId === "695eb23b86668712477b5f47" ? "bg-gray-700/70" : "bg-[#6d5dfc]"
                                    }`}
                            >
                                {msg.text}
                                <div className="text-[10px] opacity-60 text-right mt-1">
                                    {new Date(msg.createdAt).toLocaleTimeString()}
                                </div>
                            </div>

                            {/* Avatar only for user messages */}
                            {msg.senderId !== null && (
                                <FaUserAstronaut className="size-5 opacity-80" />
                            )}
                        </div>
                    ))}
            </div>

            {/* Message Bar */}
            <div className="absolute bottom-0 left-0 right-0 flex items-center gap-3 p-3">
                <div className="flex-1 flex items-center bg-gray-100/12 rounded-full px-3">
                    <input type="text" placeholder="Send a message" className="flex-1 text-sm p-3 border-none rounded-lg outline-none text-white placeholder-gray-500" />

                    <IoMdSend className="w-7 cursor-pointer hover:text-blue-950" />
                </div>
            </div>


        </div >
    ) : (
        <div className="bg-white/10 h-full p-5 rounded-xl text-white backdrop-blur-xs max-md:hidden flex flex-col items-center justify-center gap-2">
            <FaUserAstronaut className="size-16 drop-shadow-[0_0_20px_rgba(255,255,255,0.5)]" />
            <h2 className="text-2xl font-semibold">Select a Room to Start Chatting</h2>
            <p className="text-center text-sm max-w-md">Choose a chat room from the sidebar to join the conversation and connect with others!</p>
        </div>
    )
};

export default ChatContainer;







<InputEmoji
                        type="text"
                        value={text}
                        onChange={setText}
                        onKeyDown={(e) => e.key === "Enter" && handleSend()}
                        placeholder="Send a message"
                        className="flex-1 text-sm p-3 bg-transparent outline-none text-white placeholder-gray-500"
                    />
